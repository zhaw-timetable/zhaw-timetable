import { Head, Notes } from 'mdx-deck';
export { default as theme } from './theme';
import Carbon from './components/Carbon/Carbon.jsx';

import './main.css';

<Head>
  <title>ZHAWo - Platform Independent Timetable App</title>
</Head>

## Platform Independent Timetable App

![pwa](./Assets/zhawoLogo.png)

###### Bachmann Dominik, Visser Julian

<Notes>
  
Intro

Explain what the goal is.

Timetable app:

- for both Android Ios and Desktop
- Fast
- Works offline

</Notes>

---

## Progressive Web App

![pwa](./Assets/pwa_explainV2.png)

<Notes>
  
PWA Advantages vs stuff like native and react-native

- new technology
- goal of project see how practical

Explain caching with service worker:

Tell with urls to cache

- css, font, images
- api requests

First cache ->try and get new data

24h

</Notes>

---

# Development

<Notes>
  
Agile approach with sprints of 2 weeks

</Notes>

---

## Primary functions

<div className="extraSmall">

![pwa](https://raw.githubusercontent.com/zhaw-timetable/zhawo/master/docs/latex/BA/screenshots_raw/screen_timetable_day.png?raw=true)
![pwa](https://raw.githubusercontent.com/zhaw-timetable/zhawo/master/docs/latex/BA/screenshots_raw/screen_mensa_menu.png?raw=true)
![pwa](https://raw.githubusercontent.com/zhaw-timetable/zhawo/master/docs/latex/BA/screenshots_raw/screen_rooms_blue.png?raw=true)
![pwa](https://raw.githubusercontent.com/zhaw-timetable/zhawo/master/docs/latex/BA/screenshots_raw/screen_vszhaw_feed.png?raw=true)

</div>

<Notes>
  
Timetable

Mensa

Room search

vszhaw news

We had 4 primary functions that we wanted to provide

Timetable, Mensa menus, room search and vszhaw news events

</Notes>

---

## User stories

<div style={{width: 1000, fontSize: '0.8em'}}>

**US10**: As a student I want to view my timetable for a day

**US12**: As a student I want to navigate to the current day

**US13**: As a student I want to navigate between days when using the day view

...

</div>

<Notes>

Split up the primary functions into user stories, f.ex. for timetable ... and
so on

</Notes>

---

## GitHub issues

<div className="big">

![](./Assets/github_issues.png)

</div>

<Notes>

Used GitHub issues to keep track of user stories, story point estimates as
labels

</Notes>

---

## Sprints

<div className="big">

![](./Assets/github_sprints.png)

</div>

<Notes>
  
For actual sprint planning used GitHub project board

</Notes>

---

## Testing

Run unit tests before pushing code

Track code test coverage with codecov

<Notes>

Extensive unit tests, with git hook to run test suite before every push

</Notes>

---

## Continuous integration

<div className="big">

![](./Assets/travis_dashboard.png)

</div>

<Notes>
  
Travis CI to keep track of build status

</Notes>

---

## Sprint reviews

<div className="big">

![](./Assets/sprint_burndown.png)

</div>

<Notes>

Our own review of progress, decisions, and feedback group of classmates and
other students

</Notes>

---

# Implementation

---

## Architecture

<div style={{width: 850}}>

![](./Assets/architecture.png)

</div>

<Notes>

Both frontend and backend in JavaScript,
since most user stories require changes in both front and backend, easier

Layer of abstraction with API adapters

</Notes>

---

## Flux pattern

<div style={{width: 650}}>

![](./Assets/flux_diagram.png)

</div>

<Notes>

More detailed look into the frontend React application,

Flux design pattern, unidirectional flow

</Notes>

---

## Code example

<div style={{width: 900, fontSize: '0.8em'}}>

<b>US13</b>: As a student I want to navigate between days when using the day view

</div>

---

## Code example

<div style={{width: 700}}>

![nav](./Assets/navigation_screens.png)

</div>

---

## View / React component

<Carbon>
  {`
  handleDateClick = newDate => e => {
    scheduleActions.gotoDay(newDate);
  }; 
    `}
</Carbon>

---

## Action dispatcher

<Carbon>
  {`
  export const gotoDay = targetDate => {
    dispatcher.dispatch({
      type: 'GOTO_DAY',
      payload: targetDate
    });
  };
    `}
</Carbon>

---

## Store

<Carbon>
  {`
  async handleActions(action) {
    switch (action.type) {
      case 'GOTO_DAY':
        const targetDate = action.payload;
        this.displayDay = this.convertSunday(targetDate);
        this.displayWeek = this.createDisplayWeek(this.displayDay);
        this.displayMonth = this.createDisplayMonth(this.displayDay);
        this.emit('schedule_changed');
        break;
    }
  }
  `}
</Carbon>

---

## View update

<Carbon>
  {`
  componentWillMount() {
    scheduleStore.on('schedule_changed', this.refreshSchedule);
  }
  refreshSchedule = () => {
    this.setState({
      displayDay: scheduleStore.displayDay,
      schedule: scheduleStore.schedule
    });
  };
`}

</Carbon>

---

## Feedback

<div className="small">

![pwa](./Assets/bar_1.png)

![pwa](./Assets/bar_2.png)

![pwa](./Assets/bar_3.png)

</div>

<Notes>
  
collected user feedback:

1. small test group people we know
2. candy mensa showed people.

show graphs

things people liked:

- ...

did not like:

- ....

</Notes>

---

## Demo

<div className="big">

![pwa](./Assets/desktop_schedule.png)

</div>

<Notes>
  
Show all primary functions in presentation and then let expert use app with phone.

</Notes>
